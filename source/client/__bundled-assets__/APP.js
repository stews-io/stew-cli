var __moduleIifeResult=(()=>{var T,c,Z,Pe,M,ee,te,B,De,I={},ne=[],Me=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function P(t,e){for(var n in e)t[n]=e[n];return t}function _e(t){var e=t.parentNode;e&&e.removeChild(t)}function oe(t,e,n){var o,i,r,s={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?T.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return R(t,s,o,i,null)}function R(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Z};return i==null&&c.vnode!=null&&c.vnode(r),r}function C(t){return t.children}function U(t,e){this.props=t,this.context=e}function V(t,e){if(e==null)return t.__?V(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?V(t):null}function re(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return re(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&M.push(t)&&!N.__r++||ee!==c.debounceRendering)&&((ee=c.debounceRendering)||te)(N)}function N(){var t,e,n,o,i,r,s,l,u;for(M.sort(B);t=M.shift();)t.__d&&(e=M.length,o=void 0,i=void 0,r=void 0,l=(s=(n=t).__v).__e,(u=n.__P)&&(o=[],i=[],(r=P({},s)).__v=s.__v+1,q(u,s,r,n.__n,u.ownerSVGElement!==void 0,s.__h!=null?[l]:null,o,l??V(s),s.__h,i),pe(o,s,i),s.__e!=l&&re(s)),M.length>e&&M.sort(B));N.__r=0}function se(t,e,n,o,i,r,s,l,u,g,d){var _,m,f,a,p,K,v,w,k,b=0,S=o&&o.__k||ne,$=S.length,D=$,E=e.length;for(n.__k=[],_=0;_<E;_++)(a=n.__k[_]=(a=e[_])==null||typeof a=="boolean"||typeof a=="function"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?R(null,a,null,null,a):Q(a)?R(C,{children:a},null,null,null):a.__b>0?R(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null?(a.__=n,a.__b=n.__b+1,(w=Ie(a,S,v=_+b,D))===-1?f=I:(f=S[w]||I,S[w]=void 0,D--),q(t,a,f,i,r,s,l,u,g,d),p=a.__e,(m=a.ref)&&f.ref!=m&&(f.ref&&G(f.ref,null,a),d.push(m,a.__c||p,a)),p!=null&&(K==null&&(K=p),(k=f===I||f.__v===null)?w==-1&&b--:w!==v&&(w===v+1?b++:w>v?D>E-v?b+=w-v:b--:b=w<v&&w==v-1?w-v:0),v=_+b,typeof a.type!="function"||w===v&&f.__k!==a.__k?typeof a.type=="function"||w===v&&!k?a.__d!==void 0?(u=a.__d,a.__d=void 0):u=p.nextSibling:u=ae(t,p,u):u=le(a,u,t),typeof n.type=="function"&&(n.__d=u))):(f=S[_])&&f.key==null&&f.__e&&(f.__e==u&&(u=V(f)),Y(f,f,!1),S[_]=null);for(n.__e=K,_=$;_--;)S[_]!=null&&(typeof n.type=="function"&&S[_].__e!=null&&S[_].__e==n.__d&&(n.__d=S[_].__e.nextSibling),Y(S[_],S[_]))}function le(t,e,n){for(var o,i=t.__k,r=0;i&&r<i.length;r++)(o=i[r])&&(o.__=t,e=typeof o.type=="function"?le(o,e,n):ae(n,o.__e,e));return e}function ae(t,e,n){return n==null||n.parentNode!==t?t.insertBefore(e,null):e==n&&e.parentNode!=null||t.insertBefore(e,n),e.nextSibling}function Ie(t,e,n,o){var i=t.key,r=t.type,s=n-1,l=n+1,u=e[n];if(u===null||u&&i==u.key&&r===u.type)return n;if(o>(u!=null?1:0))for(;s>=0||l<e.length;){if(s>=0){if((u=e[s])&&i==u.key&&r===u.type)return s;s--}if(l<e.length){if((u=e[l])&&i==u.key&&r===u.type)return l;l++}}return-1}function Ee(t,e,n,o,i){var r;for(r in n)r==="children"||r==="key"||r in e||L(t,r,null,n[r],o);for(r in e)i&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===e[r]||L(t,r,e[r],n[r],o)}function ue(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Me.test(e)?n:n+"px"}function L(t,e,n,o,i){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||ue(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||ue(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o||t.addEventListener(e,r?fe:ce,r):t.removeEventListener(e,r?fe:ce,r);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function ce(t){return this.l[t.type+!1](c.event?c.event(t):t)}function fe(t){return this.l[t.type+!0](c.event?c.event(t):t)}function q(t,e,n,o,i,r,s,l,u,g){var d,_,m,f,a,p,K,v,w,k,b,S,$,D,E,x=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,l=e.__e=n.__e,e.__h=null,r=[l]),(d=c.__b)&&d(e);e:if(typeof x=="function")try{if(v=e.props,w=(d=x.contextType)&&o[d.__c],k=d?w?w.props.value:d.__:o,n.__c?K=(_=e.__c=n.__c).__=_.__E:("prototype"in x&&x.prototype.render?e.__c=_=new x(v,k):(e.__c=_=new U(v,k),_.constructor=x,_.render=Ve),w&&w.sub(_),_.props=v,_.state||(_.state={}),_.context=k,_.__n=o,m=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),x.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=P({},_.__s)),P(_.__s,x.getDerivedStateFromProps(v,_.__s))),f=_.props,a=_.state,_.__v=e,m)x.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(x.getDerivedStateFromProps==null&&v!==f&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(v,k),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(v,_.__s,k)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(_.props=v,_.state=_.__s,_.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(W){W&&(W.__=e)}),b=0;b<_._sb.length;b++)_.__h.push(_._sb[b]);_._sb=[],_.__h.length&&s.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(v,_.__s,k),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(f,a,p)})}if(_.context=k,_.props=v,_.__P=t,_.__e=!1,S=c.__r,$=0,"prototype"in x&&x.prototype.render){for(_.state=_.__s,_.__d=!1,S&&S(e),d=_.render(_.props,_.state,_.context),D=0;D<_._sb.length;D++)_.__h.push(_._sb[D]);_._sb=[]}else do _.__d=!1,S&&S(e),d=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++$<25);_.state=_.__s,_.getChildContext!=null&&(o=P(P({},o),_.getChildContext())),m||_.getSnapshotBeforeUpdate==null||(p=_.getSnapshotBeforeUpdate(f,a)),se(t,Q(E=d!=null&&d.type===C&&d.key==null?d.props.children:d)?E:[E],e,n,o,i,r,s,l,u,g),_.base=e.__e,e.__h=null,_.__h.length&&s.push(_),K&&(_.__E=_.__=null)}catch(W){e.__v=null,(u||r!=null)&&(e.__e=l,e.__h=!!u,r[r.indexOf(l)]=null),c.__e(W,e,n)}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Ce(n.__e,e,n,o,i,r,s,u,g);(d=c.diffed)&&d(e)}function pe(t,e,n){for(var o=0;o<n.length;o++)G(n[o],n[++o],n[++o]);c.__c&&c.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){c.__e(r,i.__v)}})}function Ce(t,e,n,o,i,r,s,l,u){var g,d,_,m=n.props,f=e.props,a=e.type,p=0;if(a==="svg"&&(i=!0),r!=null){for(;p<r.length;p++)if((g=r[p])&&"setAttribute"in g==!!a&&(a?g.localName===a:g.nodeType===3)){t=g,r[p]=null;break}}if(t==null){if(a===null)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,f.is&&f),r=null,l=!1}if(a===null)m===f||l&&t.data===f||(t.data=f);else{if(r=r&&T.call(t.childNodes),d=(m=n.props||I).dangerouslySetInnerHTML,_=f.dangerouslySetInnerHTML,!l){if(r!=null)for(m={},p=0;p<t.attributes.length;p++)m[t.attributes[p].name]=t.attributes[p].value;(_||d)&&(_&&(d&&_.__html==d.__html||_.__html===t.innerHTML)||(t.innerHTML=_&&_.__html||""))}if(Ee(t,f,m,i,l),_)e.__k=[];else if(se(t,Q(p=e.props.children)?p:[p],e,n,o,i&&a!=="foreignObject",r,s,r?r[0]:n.__k&&V(n,0),l,u),r!=null)for(p=r.length;p--;)r[p]!=null&&_e(r[p]);l||("value"in f&&(p=f.value)!==void 0&&(p!==t.value||a==="progress"&&!p||a==="option"&&p!==m.value)&&L(t,"value",p,m.value,!1),"checked"in f&&(p=f.checked)!==void 0&&p!==t.checked&&L(t,"checked",p,m.checked,!1))}return t}function G(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(o){c.__e(o,n)}}function Y(t,e,n){var o,i;if(c.unmount&&c.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||G(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){c.__e(r,e)}o.base=o.__P=null,t.__c=void 0}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Y(o[i],e,n||typeof t.type!="function");n||t.__e==null||_e(t.__e),t.__=t.__e=t.__d=void 0}function Ve(t,e,n){return this.constructor(t,n)}function He(t,e,n){var o,i,r,s;c.__&&c.__(t,e),i=(o=typeof n=="function")?null:n&&n.__k||e.__k,r=[],s=[],q(e,t=(!o&&n||e).__k=oe(C,null,[t]),i||I,I,e.ownerSVGElement!==void 0,!o&&n?[n]:i?null:e.firstChild?T.call(e.childNodes):null,r,!o&&n?n:i?i.__e:e.firstChild,o,s),pe(r,t,s)}T=ne.slice,c={__e:function(t,e,n,o){for(var i,r,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),s=i.__d),s)return i.__E=i}catch(l){t=l}throw t}},Z=0,Pe=function(t){return t!=null&&t.constructor===void 0},U.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=P({},this.state),typeof t=="function"&&(t=t(P({},n),this.props)),t&&P(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},U.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},U.prototype.render=C,M=[],te=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B=function(t,e){return t.__v.__b-e.__v.__b},N.__r=0,De=0;function H(t){throw new Error(`invalid path: ${t}`)}function Oe(t){const{stewBuildId:e}=t,n=`/stew_${e}`;return{stewResourcesDirectoryPath:n,indexHtml:"/index.html",appScript:`/app.${e}.js`,appCss:`/app.${e}.css`,configPath:`${n}/stew.config.json`,modulesDirectoryPath:`${n}/modules`,datasetsDirectoryPath:`${n}/datasets`,stylesDirectoryPath:`${n}/styles`,viewsDirectoryPath:`${n}/views`}}var j,y,z,he,J=0,de=[],A=[],me=c.__b,ve=c.__r,ye=c.diffed,ge=c.__c,we=c.unmount;function Se(t,e){c.__h&&c.__h(y,t,J||e),J=0;var n=y.__H||(y.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:A}),n.__[t]}function $e(t){return J=1,Te(ke,t)}function Te(t,e,n){var o=Se(j++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):ke(void 0,e),function(l){var u=o.__N?o.__N[0]:o.__[0],g=o.t(u,l);u!==g&&(o.__N=[g,o.__[1]],o.__c.setState({}))}],o.__c=y,!y.u)){var i=function(l,u,g){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(m){return m.__c});if(d.every(function(m){return!m.__N}))return!r||r.call(this,l,u,g);var _=!1;return d.forEach(function(m){if(m.__N){var f=m.__[0];m.__=m.__N,m.__N=void 0,f!==m.__[0]&&(_=!0)}}),!(!_&&o.__c.props===l)&&(!r||r.call(this,l,u,g))};y.u=!0;var r=y.shouldComponentUpdate,s=y.componentWillUpdate;y.componentWillUpdate=function(l,u,g){if(this.__e){var d=r;r=void 0,i(l,u,g),r=d}s&&s.call(this,l,u,g)},y.shouldComponentUpdate=i}return o.__N||o.__}function be(t,e){var n=Se(j++,3);!c.__s&&Ne(n.__H,e)&&(n.__=t,n.i=e,y.__H.__h.push(n))}function Re(){for(var t;t=de.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(F),t.__H.__h.forEach(X),t.__H.__h=[]}catch(e){t.__H.__h=[],c.__e(e,t.__v)}}c.__b=function(t){y=null,me&&me(t)},c.__r=function(t){ve&&ve(t),j=0;var e=(y=t.__c).__H;e&&(z===y?(e.__h=[],y.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=A,n.__N=n.i=void 0})):(e.__h.forEach(F),e.__h.forEach(X),e.__h=[],j=0)),z=y},c.diffed=function(t){ye&&ye(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(de.push(e)!==1&&he===c.requestAnimationFrame||((he=c.requestAnimationFrame)||Ue)(Re)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==A&&(n.__=n.__V),n.i=void 0,n.__V=A})),z=y=null},c.__c=function(t,e){e.some(function(n){try{n.__h.forEach(F),n.__h=n.__h.filter(function(o){return!o.__||X(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],c.__e(o,n.__v)}}),ge&&ge(t,e)},c.unmount=function(t){we&&we(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{F(o)}catch(i){e=i}}),n.__H=void 0,e&&c.__e(e,n.__v))};var xe=typeof requestAnimationFrame=="function";function Ue(t){var e,n=function(){clearTimeout(o),xe&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);xe&&(e=requestAnimationFrame(n))}function F(t){var e=y,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),y=e}function X(t){var e=y;t.__c=t.__(),y=e}function Ne(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function ke(t,e){return typeof e=="function"?e(t):e}function Ke(t){const{stewResourceMap:e,someSegmentKey:n}=t;return Promise.all([fetch(`${e.datasetsDirectoryPath}/${n}.json`).then(o=>o.json()),fetch(`${e.modulesDirectoryPath}/${n}.js`).then(o=>o.text()).then(o=>new Function(`${o}return __moduleIifeResult.default`)()),fetch(`${e.viewsDirectoryPath}/${n}.json`).then(o=>o.json()),fetch(`${e.stylesDirectoryPath}/${n}.css`).then(o=>o.text())])}function O(t){const{someMap:e,itemSearchKey:n,itemTargetValue:o}=t;return Object.values(e).find(i=>i[n]===o)}function Le(t){const{initialStewState:e,stewConfig:n,stewResourceMap:o}=t,[i,r]=$e(e);return be(()=>{const s=new URLSearchParams;s.set("sort",`${i.segmentSortOptionKey}`),i.viewSearchQuery.length>0&&s.set("search",i.viewSearchQuery),window.history.replaceState(null,"noop",`/${i.segmentKey}/${i.segmentViewKey}?${s.toString()}`)},[i]),be(()=>{i.segmentStatus==="loadingSegment"&&je({stewResourceMap:o,stewState:i,setStewState:r})},[i]),h("div",null,h("div",{style:{display:"flex",flexDirection:"row"}},Object.values(n.stewSegments).sort((s,l)=>s.segmentIndex-l.segmentIndex).map(s=>h("div",{style:{padding:8,color:"purple",cursor:"pointer",fontWeight:700,textDecoration:i.segmentKey===s.segmentKey?"underline":"none"},onClick:()=>{i.segmentKey!==s.segmentKey&&r({segmentStatus:"loadingSegment",viewPageIndex:0,viewSearchQuery:"",segmentKey:s.segmentKey,segmentViewKey:O({itemTargetValue:0,itemSearchKey:"viewIndex",someMap:n.stewSegments[s.segmentKey].segmentViews}).viewKey,segmentSortOptionKey:O({itemTargetValue:0,itemSearchKey:"sortOptionIndex",someMap:n.stewSegments[s.segmentKey].segmentSortOptions}).sortOptionKey})}},s.segmentLabel))),h("div",{style:{display:"flex",flexDirection:"row"}},Object.values(n.stewSegments[i.segmentKey].segmentViews).sort((s,l)=>s.viewIndex-l.viewIndex).map(s=>h("div",{style:{padding:8,color:"blue",cursor:"pointer",fontWeight:700,textDecoration:i.segmentViewKey===s.viewKey?"underline":"none"},onClick:()=>{i.segmentViewKey!==s.viewKey&&r(l=>({...l,segmentViewKey:s.viewKey}))}},s.viewLabel))),h("div",{style:{display:"flex",flexDirection:"row"}},Object.values(n.stewSegments[i.segmentKey].segmentSortOptions).sort((s,l)=>s.sortOptionIndex-l.sortOptionIndex).map(s=>h("div",{style:{padding:8,color:"green",cursor:"pointer",fontWeight:700,textDecoration:i.segmentSortOptionKey===s.sortOptionKey?"underline":"none"},onClick:()=>{i.segmentSortOptionKey!==s.sortOptionKey&&r(l=>({...l,segmentSortOptionKey:s.sortOptionKey}))}},s.sortOptionLabel))),h("div",{style:{padding:8}},h("input",{value:i.viewSearchQuery,onInput:s=>{const l=s.currentTarget.value;r(u=>({...u,viewSearchQuery:l}))}})),i.segmentStatus==="segmentLoaded"?h(C,null,h(i.segmentModule.SegmentItemDisplay,{someSegmentItem:i.segmentDataset[0]}),h("style",null,i.segmentCss)):null)}async function je(t){const{stewResourceMap:e,stewState:n,setStewState:o}=t,[i,r,s,l]=await Ke({stewResourceMap:e,someSegmentKey:n.segmentKey});o({...n,segmentStatus:"segmentLoaded",segmentDataset:i,segmentModule:r,segmentViewsMap:s,segmentCss:l})}window.h=oe,Ae();async function Ae(){const{stewConfig:t,stewResourceMap:e,initialStewState:n}=await Fe();He(h(Le,{stewConfig:t,stewResourceMap:e,initialStewState:n}),document.getElementById("appContainer")??H("hydrate.appContainer")),document.getElementById("splashPageStyle")?.remove(),console.info(t)}async function Fe(){const t=new Promise(K=>{setTimeout(()=>{K()},700)}),e=document.getElementById("appScript")?.dataset.stew_build_id??H("loadStewResources.stewBuildId"),n=Oe({stewBuildId:e}),o=await fetch(n.configPath).then(K=>K.json()),[i,r,s]=window.location.pathname.split("/"),l=new URLSearchParams(window.location.search),u=o.stewSegments[r]??O({itemTargetValue:0,itemSearchKey:"segmentIndex",someMap:o.stewSegments})??H("initialSegmentConfig"),g=Ke({stewResourceMap:n,someSegmentKey:u.segmentKey}),d=u.segmentViews[s]??O({itemTargetValue:0,itemSearchKey:"viewIndex",someMap:u.segmentViews})??H("initialSegmentViewConfig"),_=u.segmentSortOptions[l.get("sort")??"__EMPTY_SORT_KEY__"]??O({itemTargetValue:0,itemSearchKey:"sortOptionIndex",someMap:u.segmentSortOptions})??H("initialSegmentSortOptionConfig"),[[m,f,a,p]]=await Promise.all([g,t]);return{stewResourceMap:n,stewConfig:o,initialStewState:{viewPageIndex:0,segmentStatus:"segmentLoaded",segmentDataset:m,segmentModule:f,segmentViewsMap:a,segmentCss:p,segmentKey:u.segmentKey,segmentViewKey:d.viewKey,segmentSortOptionKey:_.sortOptionKey,viewSearchQuery:l.get("search")??""}}}})();
